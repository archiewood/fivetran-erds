CREATE TABLE session_presented_offer (
    guid text,
    session_id text,
    accepted text,
    accepted_at text,
    declined_at text,
    discount_config_coupon_id text,
    discount_config_custom_duration text,
    offer_type text,
    pause_config_interval text,
    pause_config_max_pause_length text,
    presented_at text,
    survey_offer text,
    PRIMARY KEY (guid, session_id),
    FOREIGN KEY (session_id) REFERENCES "session"(id)
);

CREATE TABLE session_accepted_offer (
    guid text,
    session_id text,
    coupon_amount text,
    coupon_duration text,
    coupon_id text,
    coupon_type text,
    new_plan_id text,
    new_plan_price text,
    offer_type text,
    pause_duration text,
    pause_interval text,
    PRIMARY KEY (guid, session_id),
    FOREIGN KEY (session_id) REFERENCES "session"(id)
);

CREATE TABLE session_steps_viewed (
    guid text,
    start_at text,
    session_id text,
    duration text,
    end_at text,
    num_choices text,
    step_type text,
    PRIMARY KEY (guid, start_at, session_id),
    FOREIGN KEY (session_id) REFERENCES "session"(id)
);

CREATE TABLE customer_attribute (
    "name" text,
    customer_id text,
    customer_session_id text,
    "value" text,
    PRIMARY KEY ("name", customer_id, customer_session_id),
    FOREIGN KEY (customer_id) REFERENCES customer(id),
    FOREIGN KEY (customer_session_id) REFERENCES customer(session_id)
);

CREATE TABLE customer (
    id text,
    session_id text,
    billing_interval text,
    billing_interval_count text,
    created text,
    currency text,
    email text,
    item_quantity text,
    latest_discount_expiration text,
    pause_end text,
    paused text,
    plan_id text,
    plan_price text,
    subscription_discount_coupon_amount text,
    subscription_discount_coupon_duration text,
    subscription_discount_coupon_id text,
    subscription_discount_coupon_type text,
    subscription_discount_end text,
    subscription_discount_id text,
    subscription_discount_start text,
    subscription_id text,
    subscription_period_end text,
    subscription_period_start text,
    subscription_start text,
    PRIMARY KEY (id, session_id),
    FOREIGN KEY (session_id) REFERENCES "session"(id)
);

CREATE TABLE "session" (
    id text,
    aborted text,
    abtest text,
    blueprint_id text,
    canceled text,
    created_at text,
    custom_action_handler text,
    discount_cooldown text,
    discount_cooldown_applied text,
    feedback text,
    followup_question text,
    followup_response text,
    managed_flow text,
    mode text,
    organization text,
    provider text,
    recording text,
    recording_end_time text,
    recording_start_time text,
    save_type text,
    segment_id text,
    sentiment_scores_emotion_a_angry text,
    sentiment_scores_emotion_a_confused text,
    sentiment_scores_emotion_a_grateful text,
    sentiment_scores_emotion_a_practical text,
    sentiment_scores_emotion_b_angry text,
    sentiment_scores_emotion_b_confused text,
    sentiment_scores_emotion_b_grateful text,
    sentiment_scores_emotion_b_practical text,
    sentiment_scores_product_a_negative text,
    sentiment_scores_product_a_positive text,
    sentiment_scores_product_b_negative text,
    sentiment_scores_product_b_recommend text,
    sentiment_scores_product_c_great text,
    sentiment_scores_product_c_poor text,
    sentiment_scores_product_d_dislike text,
    sentiment_scores_product_d_hate text,
    sentiment_scores_product_d_likes text,
    sentiment_scores_product_d_love text,
    sentiment_scores_reactivate_a_negative text,
    sentiment_scores_reactivate_a_reactivate text,
    sentiment_scores_reactivate_b_negative text,
    sentiment_scores_reactivate_b_reactivate text,
    sentiment_scores_reason_a_budget text,
    sentiment_scores_reason_a_ease text,
    sentiment_scores_reason_a_feature text,
    sentiment_scores_reason_a_need text,
    sentiment_scores_reason_a_refund text,
    sentiment_scores_reason_a_technical text,
    sentiment_scores_reason_b_budget text,
    sentiment_scores_reason_b_ease text,
    sentiment_scores_reason_b_feature text,
    sentiment_scores_reason_b_need text,
    sentiment_scores_reason_b_refund text,
    sentiment_scores_reason_b_technical text,
    sentiment_scores_subjective_a_emotional text,
    sentiment_scores_subjective_a_reasonable text,
    survey_choice_id text,
    survey_choice_value text,
    survey_id text,
    updated_at timestamp,
    PRIMARY KEY (id)
);
