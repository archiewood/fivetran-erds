CREATE TABLE agent_activity_log (
    id text,
    action_params text,
    action_reason text,
    action_type text,
    company text,
    context text,
    description text,
    event text,
    ip text,
    object_type text,
    occurred timestamp,
    params text,
    "source" text,
    sub_description text,
    PRIMARY KEY (id)
);

CREATE TABLE product (
    id text,
    amount text,
    amount_formatted text,
    amount_symbol text,
    billing_cycles_total text,
    chargeable text,
    charges text,
    company text,
    currency text,
    description text,
    first_seen timestamp,
    gateway_id text,
    has_agent_log text,
    "interval" text,
    interval_count text,
    logs jsonb,
    "name" text,
    quantity text,
    readable_interval text,
    setup_amount text,
    "status" text,
    support_url text,
    taxable text,
    trial_period_days text,
    url text,
    PRIMARY KEY (id)
);

CREATE TABLE subscrption_cancellation_log (
    customer_id text,
    subscription_id text,
    "action" text,
    email text,
    ip text,
    method text,
    occurred timestamp,
    reason text,
    PRIMARY KEY (customer_id, subscription_id),
    FOREIGN KEY (customer_id) REFERENCES customer(id),
    FOREIGN KEY (subscription_id) REFERENCES subscription(id)
);

CREATE TABLE item (
    id text,
    subscription_id text,
    amount text,
    amount_formatted text,
    currency text,
    description text,
    percents text,
    quantity text,
    PRIMARY KEY (id),
    FOREIGN KEY (subscription_id) REFERENCES subscription(id)
);

CREATE TABLE subscription (
    id text,
    customer_id text,
    product_id text,
    accurate_at timestamp,
    amount text,
    amount_formatted text,
    amount_symbol text,
    billing_cycles_current text,
    billing_cycles_total text,
    canceled_at timestamp,
    charges text,
    company text,
    currency text,
    current_period_end timestamp,
    current_period_start timestamp,
    ended_at timestamp,
    first_seen timestamp,
    gateway_id text,
    gateway_url text,
    has_items text,
    has_meta text,
    "interval" text,
    interval_count text,
    last_email timestamp,
    logs jsonb,
    manage_url text,
    metadata jsonb,
    methods_active jsonb,
    methods_supported jsonb,
    object text,
    product_desc text,
    quantity text,
    readable_interval text,
    setup_amount text,
    "status" text,
    status_text text,
    trial_end timestamp,
    trial_period_days text,
    trial_start timestamp,
    PRIMARY KEY (id),
    FOREIGN KEY (customer_id) REFERENCES customer(id),
    FOREIGN KEY (product_id) REFERENCES product(id)
);

CREATE TABLE customer (
    id text,
    accurate_at timestamp,
    billing_address text,
    card_on_file text,
    charges text,
    company text,
    country text,
    customer_company text,
    delinquent text,
    description text,
    edited text,
    email text,
    email_domain text,
    fax text,
    first_name text,
    first_seen timestamp,
    gateway_id text,
    gateway_url text,
    has_items text,
    invoice_details text,
    items jsonb,
    last_charge_id text,
    last_paid_charge text,
    logs jsonb,
    manage_url text,
    metadata jsonb,
    methods_active jsonb,
    methods_supported jsonb,
    "name" text,
    object text,
    phone text,
    readable_country text,
    send_email_to text,
    shipping_address text,
    tax_number text,
    tax_number_abr text,
    tickets text,
    unsubscribe_authorize text,
    unsubscribe_receipts text,
    unsubscribe_refunds text,
    unsubscribe_void text,
    username text,
    website text,
    PRIMARY KEY (id)
);

CREATE TABLE charge_preview_tax_rate (
    "name" text,
    product_id text,
    amount text,
    amount_formatted text,
    rate text,
    "type" text,
    PRIMARY KEY ("name", product_id),
    FOREIGN KEY (product_id) REFERENCES charge_preview(product_id)
);

CREATE TABLE charge_preview (
    _fivetran_id text,
    product_id text,
    subtotal_amount text,
    subtotal_amount_formatted text,
    total_amount text,
    total_amount_formatted text,
    PRIMARY KEY (_fivetran_id, product_id),
    FOREIGN KEY (product_id) REFERENCES product(id)
);

CREATE TABLE charge (
    id text,
    customer_id text,
    product_id text,
    subscription_id text,
    accurate_at timestamp,
    added_tax text,
    amount text,
    amount_formatted text,
    amount_refunded text,
    amount_refunded_formatted text,
    amount_symbol text,
    amount_with_commas text,
    audited_job text,
    company text,
    currency text,
    customer_country text,
    customer_email text,
    customer_email_domain text,
    customer_name text,
    customer_phone text,
    customer_username text,
    description text,
    email_last_sent timestamp,
    failure_reason text,
    gateway_id text,
    gateway_url text,
    invoice_company text,
    invoice_download_url text,
    invoice_url text,
    is_paid text,
    last_4_digits text,
    logs jsonb,
    manage_url text,
    metadata jsonb,
    methods_active jsonb,
    methods_supported jsonb,
    name_email text,
    name_send_email text,
    object text,
    occurred timestamp,
    occurred_formatted text,
    occurred_relative text,
    payment_method text,
    payment_method_bank text,
    payment_method_brand text,
    payment_method_describe text,
    product_desc text,
    refunded_at timestamp,
    refunded_at_formatted text,
    sent_authorize text,
    sent_dunning text,
    sent_invoice text,
    sent_invoice_reminder text,
    sent_receipt text,
    sent_refund_receipt text,
    sent_void text,
    statement_description text,
    "status" text,
    status_text text,
    support_email text,
    support_url text,
    transaction_id text,
    PRIMARY KEY (id),
    FOREIGN KEY (customer_id) REFERENCES customer(id),
    FOREIGN KEY (product_id) REFERENCES product(id),
    FOREIGN KEY (subscription_id) REFERENCES subscription(id)
);
