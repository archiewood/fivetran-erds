CREATE TABLE contract_product_tag (
    id text,
    contract_product_id text,
    parent text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    parent_name text,
    PRIMARY KEY (id, contract_product_id),
    FOREIGN KEY (contract_product_id) REFERENCES contract_product(id),
    FOREIGN KEY (parent) REFERENCES contract_product_tag(id)
);

CREATE TABLE contract_product (
    id text,
    department text,
    revenue_account text,
    anrok_item_id text,
    apply_dept_tag_to_invoice_journals text,
    ar_account text,
    ar_account_name text,
    avalara_item_data text,
    avalara_item_id text,
    avalara_tax_code text,
    cost text,
    created_at timestamp,
    currency text,
    customer text,
    deleted_at timestamp,
    exclude_from_mrr text,
    invoice_account text,
    invoice_account_name text,
    invoice_unbilled_account text,
    invoice_unbilled_account_name text,
    is_deleted text,
    is_taxable text,
    last_modified_at timestamp,
    price text,
    product_description text,
    product_id text,
    product_name text,
    revenue_account_name text,
    stripe_product_id text,
    tax_account_name text,
    PRIMARY KEY (id),
    FOREIGN KEY (department) REFERENCES department(id),
    FOREIGN KEY (revenue_account) REFERENCES chart_account(id)
);

CREATE TABLE vendor_contact (
    id text,
    created_at timestamp,
    deleted_at timestamp,
    email text,
    first_name text,
    is_deleted text,
    last_modified_at timestamp,
    last_name text,
    mobile_number text,
    "name" text,
    phone_number text,
    PRIMARY KEY (id)
);

CREATE TABLE balance_sheet (
    account_id text,
    parent text,
    end_date text,
    has_children_balances text,
    hierarchy jsonb,
    start_date text,
    PRIMARY KEY (account_id),
    FOREIGN KEY (account_id) REFERENCES chart_account(id),
    FOREIGN KEY (parent) REFERENCES balance_sheet(account_id)
);

CREATE TABLE revenue_transaction_tag (
    id text,
    revenue_transaction_id text,
    customer text,
    created_at timestamp,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    PRIMARY KEY (id, revenue_transaction_id),
    FOREIGN KEY (revenue_transaction_id) REFERENCES revenue_transaction(id),
    FOREIGN KEY (customer) REFERENCES contract_customer(id)
);

CREATE TABLE revenue_transaction (
    id text,
    client text,
    contract text,
    contract_subscription text,
    department text,
    journal_entry text,
    product text,
    accounting_period text,
    amount text,
    anrok_item_id text,
    balance_adjustment text,
    contract_bundle text,
    contract_external_id text,
    contract_milestone text,
    contract_subscription_external_id text,
    contract_usage text,
    created_at timestamp,
    currency text,
    deleted_at timestamp,
    description text,
    discount text,
    entity text,
    entity_currency text,
    exchange_rate text,
    exchange_rate_book text,
    external_id text,
    gross_amount text,
    invoice text,
    invoice_date text,
    invoice_number text,
    is_deleted text,
    last_modified_at timestamp,
    mrr text,
    non_contract_subscription text,
    non_contract_usage text,
    platform_fees text,
    processing_fees text,
    product_external_id text,
    quantity text,
    rate text,
    recognized text,
    refunds text,
    renewall text,
    revenue_type text,
    "source" text,
    tax text,
    transaction_date text,
    transaction_end_date text,
    transfers text,
    usage_tier text,
    usage_tier_name text,
    PRIMARY KEY (id),
    FOREIGN KEY (client) REFERENCES vendor(id),
    FOREIGN KEY (contract) REFERENCES contract(id),
    FOREIGN KEY (contract_subscription) REFERENCES contract_subscription(id),
    FOREIGN KEY (department) REFERENCES department(id),
    FOREIGN KEY (journal_entry) REFERENCES journal_entry(id),
    FOREIGN KEY (product) REFERENCES contract_product(id)
);

CREATE TABLE journal_entry_transaction (
    id text,
    journal_entry_id text,
    account text,
    department text,
    parent_department text,
    transaction_id text,
    vendor text,
    amount text,
    balance_after_transaction text,
    balance_before_transaction text,
    credit_amount text,
    date_month text,
    date_year text,
    debit_amount text,
    entity text,
    entity_currency text,
    entity_name text,
    journal_memo text,
    journal_order text,
    journal_type text,
    PRIMARY KEY (id, journal_entry_id),
    FOREIGN KEY (journal_entry_id) REFERENCES journal_entry(id),
    FOREIGN KEY (account) REFERENCES chart_account(id),
    FOREIGN KEY (department) REFERENCES department(id),
    FOREIGN KEY (parent_department) REFERENCES department(id),
    FOREIGN KEY (transaction_id) REFERENCES revenue_transaction(id),
    FOREIGN KEY (vendor) REFERENCES vendor(id)
);

CREATE TABLE journal_entry_attachment (
    id text,
    journal_entry_id text,
    app text,
    created_at timestamp,
    created_by text,
    created_by_email text,
    created_by_name text,
    customer text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    model text,
    "name" text,
    object_id text,
    s_3_content_length text,
    s_3_content_type text,
    s_3_path text,
    url text,
    PRIMARY KEY (id, journal_entry_id),
    FOREIGN KEY (journal_entry_id) REFERENCES journal_entry(id)
);

CREATE TABLE journal_entry (
    id text,
    created_at timestamp,
    created_automatically text,
    currency text,
    "date" text,
    deleted_at timestamp,
    entity text,
    intercompany_journal text,
    invoice text,
    is_deleted text,
    journal_id text,
    last_modified_at timestamp,
    memo text,
    order_id text,
    ref_number text,
    reversal_of text,
    "source" text,
    "type" text,
    PRIMARY KEY (id)
);

CREATE TABLE cost_allocation_line_tag (
    id text,
    cost_allocation_line_id text,
    parent text,
    created_at timestamp,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    PRIMARY KEY (id, cost_allocation_line_id),
    FOREIGN KEY (cost_allocation_line_id) REFERENCES cost_allocation_line(id),
    FOREIGN KEY (parent) REFERENCES cost_allocation_line_tag(id)
);

CREATE TABLE cost_allocation_line (
    id text,
    cost_allocation_id text,
    account text,
    department text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    percentage text,
    PRIMARY KEY (id, cost_allocation_id),
    FOREIGN KEY (cost_allocation_id) REFERENCES cost_allocation(id),
    FOREIGN KEY (account) REFERENCES chart_account(id),
    FOREIGN KEY (department) REFERENCES department(id)
);

CREATE TABLE cost_allocation (
    id text,
    account text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    PRIMARY KEY (id),
    FOREIGN KEY (account) REFERENCES chart_account(id)
);

CREATE TABLE chart_account (
    id text,
    parent text,
    account_cashflow_classification text,
    account_id text,
    account_subtype text,
    account_type text,
    balance_ytd text,
    created_at timestamp,
    currency text,
    customer text,
    deleted_at timestamp,
    description text,
    include_in_eliminations text,
    include_in_revaluations text,
    is_deleted text,
    last_modified_at timestamp,
    last_recompute_balance_at timestamp,
    lineage jsonb,
    lock_recompute_balance_key text,
    "name" text,
    name_and_number text,
    nickname text,
    number text,
    parent_bank_account text,
    protected text,
    reconciliation_ending_balance text,
    reconciliation_ending_date text,
    skip_subledger_validation text,
    sort_key text,
    "status" text,
    PRIMARY KEY (id),
    FOREIGN KEY (parent) REFERENCES chart_account(id)
);

CREATE TABLE vendor_associated_contact (
    id text,
    vendor_id text,
    PRIMARY KEY (id, vendor_id),
    FOREIGN KEY (id) REFERENCES vendor_contact(id),
    FOREIGN KEY (vendor_id) REFERENCES vendor(id)
);

CREATE TABLE vendor (
    id text,
    parent text,
    abbreviation text,
    address_street_1 text,
    address_street_2 text,
    anrok_customer_id text,
    bill_vendor_id text,
    billing_address_street_1 text,
    billing_address_street_2 text,
    billing_addressee text,
    billing_city text,
    billing_country text,
    billing_state text,
    billing_zip_code text,
    business_id_ssn text,
    city text,
    company_name text,
    country text,
    created_at timestamp,
    custom_field_1 text,
    custom_field_1_name text,
    custom_field_account_manager text,
    customer text,
    dba text,
    default_expense_category text,
    deleted_at timestamp,
    email text,
    external_id text,
    first_name text,
    invoice_message text,
    is_1099 text,
    is_deleted text,
    last_modified_at timestamp,
    last_name text,
    lineage_array jsonb,
    mobile_number text,
    "name" text,
    notes text,
    payment_term text,
    payment_term_name_display text,
    phone_number text,
    search_text text,
    search_vector text,
    shipping_addressee text,
    "source" text,
    "state" text,
    "status" text,
    stripe_connection text,
    stripe_connection_entity text,
    stripe_connection_name text,
    stripe_connection_portal_enabled text,
    stripe_connection_portal_url text,
    stripe_customer_id text,
    terms text,
    "type" text,
    use_stripe_auto_bill text,
    vat_number text,
    website text,
    zip_code text,
    PRIMARY KEY (id),
    FOREIGN KEY (parent) REFERENCES vendor(id)
);

CREATE TABLE department_tag (
    id text,
    department_id text,
    parent text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    PRIMARY KEY (id, department_id),
    FOREIGN KEY (department_id) REFERENCES department(id),
    FOREIGN KEY (parent) REFERENCES department_tag(id)
);

CREATE TABLE department (
    id text,
    parent text,
    active text,
    code text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    PRIMARY KEY (id),
    FOREIGN KEY (parent) REFERENCES department(id)
);

CREATE TABLE income_statement (
    account_id text,
    parent text,
    amount text,
    end_date text,
    has_children_balances text,
    hierarchy jsonb,
    start_date text,
    PRIMARY KEY (account_id),
    FOREIGN KEY (account_id) REFERENCES chart_account(id),
    FOREIGN KEY (parent) REFERENCES income_statement(account_id)
);

CREATE TABLE trial_balance (
    id text,
    parent text,
    credit text,
    debit text,
    department jsonb,
    end_date text,
    entities jsonb,
    start_date text,
    PRIMARY KEY (id),
    FOREIGN KEY (id) REFERENCES chart_account(id),
    FOREIGN KEY (parent) REFERENCES trial_balance(id)
);

CREATE TABLE custom_field (
    id text,
    app text,
    created_at timestamp,
    deleted_at timestamp,
    display_order text,
    is_active text,
    is_deleted text,
    is_required text,
    label text,
    last_modified_at timestamp,
    model text,
    "name" text,
    options jsonb,
    "type" text,
    updated_at timestamp,
    PRIMARY KEY (id)
);

CREATE TABLE cash_flow (
    account_id text,
    parent text,
    end_date text,
    hierarchy jsonb,
    start_date text,
    starting_balance text,
    -- ending_balances_* (dynamic column),
    -- transaction_activity_* (dynamic column),
    PRIMARY KEY (account_id),
    FOREIGN KEY (account_id) REFERENCES chart_account(id),
    FOREIGN KEY (parent) REFERENCES cash_flow(account_id)
);

CREATE TABLE contract_journal_entry (
    "index" text,
    contract_id text,
    journal_entry text,
    PRIMARY KEY ("index", contract_id),
    FOREIGN KEY (contract_id) REFERENCES contract(id),
    FOREIGN KEY (journal_entry) REFERENCES journal_entry(id)
);

CREATE TABLE contract_attachment (
    id text,
    contract_id text,
    customer text,
    app text,
    created_at timestamp,
    created_by text,
    created_by_email text,
    created_by_name text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    model text,
    "name" text,
    object_id text,
    s_3_content_length text,
    s_3_content_type text,
    s_3_path text,
    url text,
    PRIMARY KEY (id, contract_id),
    FOREIGN KEY (contract_id) REFERENCES contract(id),
    FOREIGN KEY (customer) REFERENCES contract_customer(id)
);

CREATE TABLE contract_tag (
    id text,
    contract_id text,
    customer text,
    parent text,
    created_at timestamp,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    parent_name text,
    PRIMARY KEY (id, contract_id),
    FOREIGN KEY (contract_id) REFERENCES contract(id),
    FOREIGN KEY (customer) REFERENCES contract_customer(id),
    FOREIGN KEY (parent) REFERENCES contract_tag(id)
);

CREATE TABLE contract (
    id text,
    customer text,
    department text,
    parent_department text,
    auto_renew text,
    auto_renew_duration text,
    auto_renew_invoice text,
    billing_frequency text,
    client text,
    client_name text,
    client_terms text,
    closed_date text,
    consultant text,
    contract_end_date text,
    contract_link text,
    contract_start_date text,
    created_at timestamp,
    crm_link text,
    currency text,
    deal_id text,
    deal_name text,
    deleted_at timestamp,
    entity text,
    entity_name text,
    exchange_rate text,
    exchange_rate_book text,
    is_deleted text,
    last_modified_at timestamp,
    search_text text,
    search_vector text,
    "source" text,
    "status" text,
    total_billed text,
    total_contract_value text,
    total_deferred_revenue text,
    total_outstanding text,
    total_paid text,
    total_unbilled text,
    usage_tiers text,
    PRIMARY KEY (id),
    FOREIGN KEY (customer) REFERENCES contract_customer(id),
    FOREIGN KEY (department) REFERENCES department(id),
    FOREIGN KEY (parent_department) REFERENCES department(id)
);

CREATE TABLE intercompany_journal_reversal (
    id text,
    intercompany_journal_id text,
    PRIMARY KEY (id, intercompany_journal_id),
    FOREIGN KEY (intercompany_journal_id) REFERENCES intercompany_journal(id)
);

CREATE TABLE intercompany_journal_transaction_tag (
    id text,
    intercompany_journal_transaction_id text,
    parent text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    PRIMARY KEY (id, intercompany_journal_transaction_id),
    FOREIGN KEY (intercompany_journal_transaction_id) REFERENCES intercompany_journal_transaction(id),
    FOREIGN KEY (parent) REFERENCES intercompany_journal_transaction_tag(id)
);

CREATE TABLE intercompany_journal_transaction (
    id text,
    intercompany_journal_id text,
    account text,
    department text,
    parent_department text,
    transaction_id text,
    vendor text,
    amount text,
    balance_after_transaction text,
    balance_before_transaction text,
    bank_account text,
    bank_description text,
    created_at timestamp,
    credit_amount text,
    date_month text,
    date_year text,
    debit_amount text,
    deleted_at timestamp,
    entity text,
    intercompany_journal text,
    is_deleted text,
    journal text,
    journal_memo text,
    journal_order text,
    journal_type text,
    last_modified_at timestamp,
    posted_at timestamp,
    PRIMARY KEY (id, intercompany_journal_id),
    FOREIGN KEY (intercompany_journal_id) REFERENCES intercompany_journal(id),
    FOREIGN KEY (account) REFERENCES chart_account(id),
    FOREIGN KEY (department) REFERENCES department(id),
    FOREIGN KEY (parent_department) REFERENCES department(id),
    FOREIGN KEY (transaction_id) REFERENCES revenue_transaction(id),
    FOREIGN KEY (vendor) REFERENCES vendor(id)
);

CREATE TABLE intercompany_journal (
    id text,
    created_at timestamp,
    created_automatically text,
    currency text,
    customer text,
    "date" text,
    deleted_at timestamp,
    entity_currency text,
    entity_name text,
    is_deleted text,
    journal_id text,
    last_modified_at timestamp,
    memo text,
    order_id text,
    ref_number text,
    reversal_of text,
    reversal_of_order text,
    "type" text,
    PRIMARY KEY (id)
);

CREATE TABLE contract_customer_contact (
    id text,
    contract_customer_id text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    PRIMARY KEY (id, contract_customer_id),
    FOREIGN KEY (contract_customer_id) REFERENCES contract_customer(id)
);

CREATE TABLE contract_customer (
    id text,
    customer text,
    parent text,
    abbreviation text,
    address_street_1 text,
    address_street_2 text,
    anrok_customer_id text,
    bill_vendor_id text,
    billing_address_street_1 text,
    billing_address_street_2 text,
    billing_city text,
    billing_country text,
    billing_state text,
    billing_zip_code text,
    business_id_ssn text,
    city text,
    company_name text,
    country text,
    created_at timestamp,
    default_expense_category text,
    deleted_at timestamp,
    email text,
    external_id text,
    first_name text,
    invoice_message text,
    is_1099 text,
    is_deleted text,
    last_modified_at timestamp,
    last_name text,
    lineage_array jsonb,
    mobile_number text,
    "name" text,
    notes text,
    payment_term text,
    payment_term_name_display text,
    phone_number text,
    "source" text,
    "state" text,
    "status" text,
    stripe_connection text,
    stripe_connection_entity text,
    stripe_connection_name text,
    stripe_connection_portal_enabled text,
    stripe_connection_portal_url text,
    stripe_customer_id text,
    terms text,
    use_stripe_auto_bill text,
    vat_number text,
    vendor_custom_field text,
    vendor_custom_field_name text,
    vendor_type text,
    website text,
    zip_code text,
    PRIMARY KEY (id),
    FOREIGN KEY (customer) REFERENCES contract_customer(id),
    FOREIGN KEY (parent) REFERENCES contract_customer(id)
);

CREATE TABLE contract_subscription_contract_product_bundle_line (
    id text,
    contract_subscription_id text,
    amount text,
    original_percentage text,
    percentage text,
    product text,
    product_name text,
    PRIMARY KEY (id, contract_subscription_id),
    FOREIGN KEY (contract_subscription_id) REFERENCES contract_subscription(id)
);

CREATE TABLE contract_subscription (
    id text,
    contract text,
    customer text,
    product text,
    catchup_date text,
    created_at timestamp,
    deleted_at timestamp,
    end_date text,
    is_contract_amendment text,
    is_deleted text,
    last_modified_at timestamp,
    lines text,
    modified_subscription text,
    mrr text,
    notes text,
    product_bundle text,
    product_bundle_currency text,
    product_bundle_id text,
    product_bundle_name text,
    product_bundle_source_bundle text,
    product_bundle_source_bundle_name text,
    quantity text,
    rate text,
    start_date text,
    total_value text,
    use_catchup text,
    use_daily_accounting text,
    PRIMARY KEY (id),
    FOREIGN KEY (contract) REFERENCES contract(id),
    FOREIGN KEY (customer) REFERENCES contract_customer(id),
    FOREIGN KEY (product) REFERENCES contract_product(id)
);

CREATE TABLE chart_transaction_tag (
    id text,
    chart_transaction_id text,
    parent text,
    created_at timestamp,
    customer text,
    deleted_at timestamp,
    group_name text,
    groups text,
    is_deleted text,
    last_modified_at timestamp,
    "name" text,
    PRIMARY KEY (id, chart_transaction_id),
    FOREIGN KEY (chart_transaction_id) REFERENCES chart_transaction(id),
    FOREIGN KEY (parent) REFERENCES chart_transaction_tag(id)
);

CREATE TABLE chart_transaction_journal_attachment (
    id text,
    chart_transaction_id text,
    app text,
    created_at timestamp,
    created_by text,
    created_by_email text,
    created_by_name text,
    customer text,
    deleted_at timestamp,
    is_deleted text,
    last_modified_at timestamp,
    model text,
    "name" text,
    object_id text,
    s_3_content_length text,
    s_3_content_type text,
    s_3_path text,
    url text,
    PRIMARY KEY (id, chart_transaction_id),
    FOREIGN KEY (chart_transaction_id) REFERENCES chart_transaction(id)
);

CREATE TABLE chart_transaction_amortization_schedule (
    id text,
    chart_transaction_id text,
    amortization text,
    amount text,
    bill_line text,
    customer text,
    "date" text,
    journal_entry text,
    journal_entry_order text,
    posted text,
    "transaction" text,
    PRIMARY KEY (id, chart_transaction_id),
    FOREIGN KEY (chart_transaction_id) REFERENCES chart_transaction(id)
);

CREATE TABLE chart_transaction (
    id text,
    account text,
    department text,
    parent_department text,
    vendor text,
    amount text,
    balance_after_transaction text,
    balance_before_transaction text,
    bank_account text,
    bill text,
    created_at timestamp,
    credit_amount text,
    date_month text,
    date_year text,
    debit_amount text,
    entity_currency text,
    entity_name text,
    invoice text,
    journal text,
    journal_memo text,
    journal_order text,
    journal_type text,
    last_modified_at timestamp,
    transaction_id text,
    PRIMARY KEY (id),
    FOREIGN KEY (account) REFERENCES chart_account(id),
    FOREIGN KEY (department) REFERENCES department(id),
    FOREIGN KEY (parent_department) REFERENCES department(id),
    FOREIGN KEY (vendor) REFERENCES vendor(id)
);
