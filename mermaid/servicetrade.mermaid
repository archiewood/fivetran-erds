erDiagram
    invoice_recurrence_item {
        text id PK
        text invoice_recurrence_id PK
        text cost
        text description
        text price
        text quantity
        text uri
    }
    invoice_recurrence {
        text id PK
        text contract_id FK
        text location_id FK
        text service_line_id FK
        text created
        text customer_id
        text customer_name
        text customer_status
        text customer_uri
        text description
        text ends_on
        text frequency
        text interval
        text next_due
        text uri
        text vendor_id
        text vendor_name
        text vendor_status
        text vendor_uri
    }
    service_line {
        text id PK
        text abbr
        text icon
        text name
        text trade
    }
    account {
        text id PK
        text company_id FK
        text name
        text timezone
        text uri
    }
    appointment_office {
        text id PK
        text appointment_id PK
        text city
        text email
        text lat
        text legacy_id
        text lon
        text name
        text phone_number
        text postal_code
        text primary_contact
        text ref_number
        text state
        text status
        text street
        text taxable
        text uri
    }
    appointment_service_request {
        text appointment_id PK
        text id PK
    }
    appointment_tech {
        text id PK
        text appointment_id PK
        jsonb avatar
        text email
        text is_helper
        text is_tech
        text name
        text status
        text uri
    }
    appointment {
        text id PK
        text job_id FK
        text location_id FK
        text created
        text due_by
        text name
        text released
        text status
        text updated
        text uri
        text vendor_id
        text vendor_name
        text vendor_status
        text vendor_uri
        text window_end
        text window_start
    }
    quote_job {
        text id PK
        text quote_id PK
    }
    quote_line {
        text id PK
        text quote_id PK
    }
    quote_tag {
        text id PK
        text quote_id PK
        text name
        text uri
    }
    quote_service_request {
        text id PK
        text quote_id PK
    }
    quote_deficiency_job {
        text id PK
        text quote_id PK
    }
    quote {
        text id PK
        text assigned_office_id FK
        text assigned_to_id FK
        text contract_id FK
        text location_id FK
        text owner_id FK
        text quote_item_id FK
        text created
        text customer_id
        text customer_name
        text customer_po
        text customer_po_required
        text customer_status
        text customer_uri
        text deficiency_severity
        text description
        text expires_on
        jsonb external_ids
        text job_type
        text latest_accepted
        text latest_submission
        text name
        text notes
        text quote_link_attachment_visibility
        text quote_link_comment_visibility
        text quote_request_id
        text quote_request_name
        text quote_request_status
        text quote_request_type
        text quote_request_uri
        text ref_number
        text respond_by
        jsonb sales_avatar
        text sales_email
        text sales_id
        text sales_is_helper
        text sales_is_tech
        text sales_name
        text sales_status
        text sales_uri
        text section_visibilities
        text status
        text sub_status
        text tasking_detail_level
        text term_id
        text term_name
        text term_uri
        text updated
        text uri
        text vendor_id
        text vendor_name
        text vendor_status
        text vendor_uri
        jsonb visibility
    }
    contact {
        text id PK
        text company_id FK
        text location_id FK
        text address_city
        text address_postal_code
        text address_state
        text address_street
        text alternate_phone
        text created
        text email
        text external_id_device_magic
        text external_id_master_company
        text external_id_migration
        text external_id_new_partner_id
        text external_id_sage
        text external_id_sage_employee_id
        text external_id_sage_test
        text first_name
        text last_name
        text mobile
        text phone
        text status
        text type
        text updated
        text uri
    }
    user_role {
        text id PK
        text users_id PK
        text name
    }
    user_service_line {
        text id PK
        text users_id PK
    }
    user_activity {
        text index PK
        text users_id PK
        text activity
    }
    users {
        text id PK
        text account_id FK
        text company_id FK
        text location_id FK
        text manager_id FK
        text service_line_id FK
        jsonb avatar
        text created
        text details
        text email
        jsonb external_id
        text first_name
        text is_helper
        text is_sales
        text is_tech
        text last_name
        text mfa_required
        text name
        text phone
        text status
        text time_zone
        text updated
        text uri
        text user_name
    }
    job_office {
        text id PK
        text job_id PK
    }
    job_tag {
        text id PK
        text job_id PK
        text name
        text uri
    }
    job_appointment {
        text id PK
        text job_id PK
    }
    job {
        text id PK
        text assigned_office_id FK
        text contract_id FK
        text current_appointment_id FK
        text location_id FK
        text owner_id FK
        text budgeted
        text completed_on
        text created
        text custom_name
        text customer_email
        text customer_id
        text customer_name
        text customer_po
        text customer_status
        text customer_uri
        text description
        text display_status
        text display_sub_status
        text due_after
        text due_by
        text estimated_price
        jsonb external_id
        text is_project
        text ivr_activity
        text ivr_open
        text job_type_weight
        text latest_clock_in
        text name
        text number
        text percent_complete
        text primary_contact
        text project
        text ref_number
        jsonb sales_avatar
        text sales_email
        text sales_id
        text sales_is_helper
        text sales_is_tech
        text sales_name
        text sales_status
        text sales_uri
        text scheduled_date
        text section_visibilities
        text service_line
        text service_link_attachment_category_visibility
        text service_link_attachment_visibility
        text service_link_comment_visibility
        text status
        text sub_status
        text terms
        text type
        text updated
        text uri
        text vendor_id
        text vendor_name
        text vendor_status
        text vendor_uri
        jsonb visibility
    }
    service_recurrence_item {
        text id PK
        text service_recurrence_id PK
        text description
        text uri
    }
    service_recurrence_preferred_tech {
        text id PK
        text service_recurrence_id PK
        jsonb avatar
        text email
        text is_helper
        text is_tech
        text name
        text status
        text uri
    }
    service_recurrence {
        text id PK
        text asset_id FK
        text contract_id FK
        text location_id FK
        text service_line_id FK
        text created
        text description
        text duration
        text ends_on
        text estimated_price
        text first_end
        text first_start
        text frequency
        text frequency_category
        text interval
        text parent
        text preferred_start_time
        text preferred_vendor
        text repeat_weekday
        text scheduling_type
        text tasking_duration
        text updated
        text uri
    }
    lib_item {
        text id PK
        text company_id FK
        text service_line_id FK
        text active
        text code
        text cost
        text created
        jsonb external_id
        text is_generic
        text name
        text price
        text price_rule_type
        text taxable
        text type
        text type_id
        text updated
        text uri
    }
    company_service_line_provided {
        text id PK
        text company_id PK
        text abbr
        text icon
        text name
        text trade
    }
    company {
        text id PK
        text address_city
        text address_postal_code
        text address_state
        text address_street
        text created
        text customer
        text default_brand
        text external_id_device_magic
        text external_id_master_company
        text external_id_migration
        text external_id_new_partner_id
        text external_id_sage
        text external_id_sage_employee_id
        text external_id_sage_test
        text logo_aspect
        text logo_content_url
        text logo_id
        text logo_uri
        text managing_account
        text name
        text parts_vendor
        text phone_number
        text prime_contractor
        text ref_number
        text share_id
        text status
        jsonb tags
        text updated
        text uri
        text vendor
    }
    service_request_preferred_vendor {
        text id PK
        text service_request_id PK
    }
    service_request_preferred_tech {
        text id PK
        text service_request_id PK
    }
    service_request {
        text id PK
        text asset_id FK
        text contract_id FK
        text deficiency_id FK
        text job_id FK
        text location_id FK
        text service_line_id FK
        text service_recurrence_id FK
        text budget
        text change_order
        text change_order_id
        text change_order_reference_number
        text change_order_status
        text change_order_type
        text change_order_uri
        text closed_on
        text created
        text description
        text duration
        text estimated_price
        text original_window_end
        text original_window_start
        text preferred_start_time
        text quote_link_attachment_visibility
        text quote_link_comment_visibility
        jsonb quote_requests
        text service_link_attachment_category_visibility
        text service_link_attachment_visibility
        text service_link_comment_visibility
        text status
        jsonb task_instances
        jsonb task_lists
        text updated
        text uri
        jsonb visibility
        text window_end
        text window_start
    }
    deficiency {
        text id PK
        text asset_id FK
        text job_id FK
        text location_id FK
        text owner_id FK
        text service_line_id FK
        text created
        text description
        jsonb external_id
        text last_reported_status
        text proposed_fix
        text ref_number
        text report_source
        text reported_on
        jsonb reporter_avatar
        text reporter_email
        text reporter_id
        text reporter_is_helper
        text reporter_is_tech
        text reporter_name
        text reporter_status
        text reporter_uri
        text resolution
        jsonb sales_avatar
        text sales_email
        text sales_id
        text sales_is_helper
        text sales_is_tech
        text sales_name
        text sales_status
        text sales_uri
        text severity
        text status
        text title
        text updated
        text uri
        jsonb visibility
    }
    location_tag {
        text id PK
        text location_id PK
        text name
        text uri
    }
    location_office {
        text id PK
    }
    location {
        text id PK
        text company_id FK
        text primary_contact_id FK
        text address_city
        text address_postal_code
        text address_state
        text address_street
        text brand
        text created
        text distance
        text email
        jsonb external_id
        text general_manager
        text geo_code_quality
        text lat
        text legacy_id
        text lon
        text name
        text phone_number
        text ref_number
        text remit_to_address_city
        text remit_to_address_email
        text remit_to_address_phone
        text remit_to_address_postal_code
        text remit_to_address_state
        text remit_to_address_street
        text remit_to_source
        text status
        text store_number
        text tax_group_code
        text tax_group_combined_rate
        text tax_group_id
        text tax_group_name
        text tax_group_state
        text tax_group_uri
        text taxable
        text updated
        text uri
    }
    invoice {
        text id PK
        text job_id FK
        text location_id FK
        text assigned_office_city
        text assigned_office_id
        text assigned_office_lat
        text assigned_office_legacy_id
        text assigned_office_lon
        text assigned_office_name
        text assigned_office_phone_number
        text assigned_office_postal_code
        text assigned_office_primary_contact
        text assigned_office_ref_number
        text assigned_office_state
        text assigned_office_status
        text assigned_office_street
        text assigned_office_taxable
        text assigned_office_uri
        text assigned_user
        text contract
        text created
        jsonb customer_external_id
        text customer_id
        text customer_name
        text customer_po
        text customer_status
        text customer_uri
        text due_date
        text invoice_number
        text name
        text notes
        text paid
        text partial
        text payment_terms
        text ref_number
        text sent
        text status
        text sub_status
        jsonb tags
        text tax_amount
        text term_id
        text term_name
        text term_uri
        text transaction_date
        text type
        text updated
        text uri
        text vendor_id
        text vendor_name
        text vendor_status
        text vendor_uri
        jsonb visibility
    }
    contract_rule_lib_item {
        text contract_rule_id PK
        text id PK
    }
    contract_rule {
        text id PK
        text contract_id FK
        text service_line_id FK
        text created
        text name
        text price
        text threshold
        text type
        text updated
        text uri
    }
    asset {
        text id PK
        text location_id FK
        text service_line_id FK
        text asset_definition_display
        text asset_definition_id
        text asset_definition_type
        text asset_definition_uri
        text created
        text display
        text external_id_device_magic
        text external_id_master_company
        text external_id_migration
        text external_id_new_partner_id
        text external_id_sage
        text external_id_sage_employee_id
        text external_id_sage_test
        text has_active_task_list
        text is_abstract_group
        text legacy_id
        text name
        text order_index
        text parent_id
        text parent_name
        text parent_type
        text parent_uri
        text properties_area
        text properties_barcode
        text properties_device_manufacturer
        text properties_device_model
        text properties_device_number
        text properties_device_range
        text properties_device_type
        text properties_device_zone_address
        text properties_location_in_site
        text properties_serial
        text properties_system_name
        text status
        text task_list
        text type
        text updated
        text uri
    }
    quote_item {
        text id PK
        text lib_item_id FK
        text quote_id FK
        text service_line_id FK
        text service_request_id FK
        text cost
        text description
        text price
        text quantity
        text tax_rate
        jsonb tax_rate_details
        text uri
        jsonb visibility
    }
    clock_event_unpaired_event {
        text id PK
        text clock_event_id PK
        text appointment_id FK
        text job_id FK
        text user_id FK
        text activity
        text caller_id_name
        text caller_id_num
        text completed
        text deficiency
        text event_time
        text event_type
        text lat
        text lon
        text other_trade_deficiency
        text red_tag
        text source
        text started
        text uri
    }
    clock_event {
        text id PK
        text appointment_id FK
        text end_job_id FK
        text end_user_id FK
        text job_id FK
        text user_id FK
        text activity
        text caller_id_name
        text caller_id_num
        text completed
        text created
        text deficiency
        text elapsed_time
        text end_activity
        jsonb end_appointment
        text end_caller_id_name
        text end_caller_id_num
        text end_completed
        text end_deficiency
        text end_event_time
        text end_event_type
        text end_id
        text end_lat
        text end_lon
        text end_other_trade_deficiency
        text end_red_tag
        text end_source
        text end_started
        text end_uri
        text event_time
        text event_type
        text lat
        text lon
        text other_trade_deficiency
        text red_tag
        text source
        text started
        text uri
    }
    contract_tag {
        text id PK
        text contract_id PK
        text name
        text uri
    }
    contract {
        text id PK
        text owner_id FK
        text active
        text actual_margin
        text agreement_type
        text all_items_have_costs
        text complexity
        text created
        text customer
        text customer_po
        text description
        text entity_filter
        text expected_margin
        text expected_revenue
        text expires_on
        jsonb external_id
        text invoice_detail_level
        text invoice_notes
        text invoice_terms
        text job_terms
        text job_type
        text location
        text location_context
        text name
        text office
        text owner
        text parent
        text payment_terms_id
        text payment_terms_name
        text payment_terms_order_index
        text payment_terms_uri
        text quote_detail_level
        text quote_terms
        text region
        text revenue
        text revenue_as_of
        text review_on
        text sales
        text starts_on
        text type
        text updated
        text uri
        text vendor_id
        text vendor_name
        text vendor_status
        text vendor_uri
    }
    job_item {
        text id PK
        text job_id FK
        text lib_item_id FK
        text quote_item_id FK
        text service_line_id FK
        text service_request_id FK
        text cost
        text created
        jsonb external_id
        text name
        text quantity
        text source
        text time_used
        text updated
        text uri
        text used_on
        jsonb visibility
    }
    service_request_item {
        text id PK
        text lib_item_id FK
        text service_line_id FK
        text service_recurrence_id FK
        text service_request_id FK
        text description
        text price
        text quantity
        text uri
    }
    invoice_item {
        text id PK
        text invoice_id FK
        text invoice_recurrence_id FK
        text job_item_id FK
        text lib_item_id FK
        text service_line_id FK
        text created
        text description
        text job_item
        text order_index
        text price
        text quantity
        text service_request
        text sub_total
        text tax_amount
        text tax_group
        text tax_rate
        jsonb tax_rate_detail
        text total_price
        text updated
        text uri
        text window_end
        text window_start
    }
    deficiency_report {
        text id PK
        text asset_id FK
        text deficiency_id FK
        text job_id FK
        text service_line_id FK
        text created
        text description
        text proposed_fix
        text report_source
        jsonb reporter_avatar
        text reporter_email
        text reporter_id
        text reporter_is_helper
        text reporter_is_tech
        text reporter_name
        text reporter_status
        text reporter_uri
        text severity
        text status
        text updated
        text uri
    }
    invoice_recurrence_item }o--|| lib_item : "fk"
    invoice_recurrence_item }o--|| invoice_recurrence : "fk"
    invoice_recurrence }o--|| service_line : "fk"
    invoice_recurrence }o--|| contract : "fk"
    invoice_recurrence }o--|| location : "fk"
    account }o--|| company : "fk"
    appointment_office }o--|| appointment : "fk"
    appointment_service_request }o--|| service_request : "fk"
    appointment_service_request }o--|| appointment : "fk"
    appointment_tech }o--|| appointment : "fk"
    appointment }o--|| job : "fk"
    appointment }o--|| location : "fk"
    quote_job }o--|| job : "fk"
    quote_job }o--|| quote : "fk"
    quote_line }o--|| service_line : "fk"
    quote_line }o--|| quote : "fk"
    quote_tag }o--|| quote : "fk"
    quote_service_request }o--|| service_request : "fk"
    quote_service_request }o--|| quote : "fk"
    quote_deficiency_job }o--|| job : "fk"
    quote_deficiency_job }o--|| quote : "fk"
    quote }o--|| users : "fk"
    quote }o--|| users : "fk"
    quote }o--|| contract : "fk"
    quote }o--|| location : "fk"
    quote }o--|| location : "fk"
    quote }o--|| quote_item : "fk"
    contact }o--|| location : "fk"
    contact }o--|| company : "fk"
    user_role }o--|| users : "fk"
    user_service_line }o--|| service_line : "fk"
    user_service_line }o--|| users : "fk"
    user_activity }o--|| users : "fk"
    users }o--|| users : "fk"
    users }o--|| location : "fk"
    users }o--|| company : "fk"
    users }o--|| account : "fk"
    users }o--|| service_line : "fk"
    job_office }o--|| location : "fk"
    job_office }o--|| job : "fk"
    job_tag }o--|| job : "fk"
    job_appointment }o--|| appointment : "fk"
    job_appointment }o--|| job : "fk"
    job }o--|| appointment : "fk"
    job }o--|| users : "fk"
    job }o--|| contract : "fk"
    job }o--|| location : "fk"
    job }o--|| location : "fk"
    service_recurrence_item }o--|| service_recurrence : "fk"
    service_recurrence_preferred_tech }o--|| service_recurrence : "fk"
    service_recurrence }o--|| service_line : "fk"
    service_recurrence }o--|| asset : "fk"
    service_recurrence }o--|| contract : "fk"
    service_recurrence }o--|| location : "fk"
    lib_item }o--|| service_line : "fk"
    lib_item }o--|| company : "fk"
    company_service_line_provided }o--|| company : "fk"
    service_request_preferred_vendor }o--|| company : "fk"
    service_request_preferred_vendor }o--|| service_request : "fk"
    service_request_preferred_tech }o--|| users : "fk"
    service_request_preferred_tech }o--|| service_request : "fk"
    service_request }o--|| service_line : "fk"
    service_request }o--|| deficiency : "fk"
    service_request }o--|| asset : "fk"
    service_request }o--|| contract : "fk"
    service_request }o--|| job : "fk"
    service_request }o--|| service_recurrence : "fk"
    service_request }o--|| location : "fk"
    deficiency }o--|| service_line : "fk"
    deficiency }o--|| users : "fk"
    deficiency }o--|| asset : "fk"
    deficiency }o--|| job : "fk"
    deficiency }o--|| location : "fk"
    location_tag }o--|| location : "fk"
    location_office }o--|| location : "fk"
    location }o--|| contact : "fk"
    location }o--|| company : "fk"
    invoice }o--|| job : "fk"
    invoice }o--|| location : "fk"
    contract_rule_lib_item }o--|| lib_item : "fk"
    contract_rule_lib_item }o--|| contract_rule : "fk"
    contract_rule }o--|| service_line : "fk"
    contract_rule }o--|| contract : "fk"
    asset }o--|| service_line : "fk"
    asset }o--|| location : "fk"
    quote_item }o--|| service_line : "fk"
    quote_item }o--|| quote : "fk"
    quote_item }o--|| lib_item : "fk"
    quote_item }o--|| service_request : "fk"
    clock_event_unpaired_event }o--|| users : "fk"
    clock_event_unpaired_event }o--|| appointment : "fk"
    clock_event_unpaired_event }o--|| job : "fk"
    clock_event_unpaired_event }o--|| clock_event : "fk"
    clock_event }o--|| users : "fk"
    clock_event }o--|| appointment : "fk"
    clock_event }o--|| job : "fk"
    clock_event }o--|| users : "fk"
    clock_event }o--|| job : "fk"
    contract_tag }o--|| contract : "fk"
    contract }o--|| users : "fk"
    job_item }o--|| service_line : "fk"
    job_item }o--|| lib_item : "fk"
    job_item }o--|| job : "fk"
    job_item }o--|| quote_item : "fk"
    job_item }o--|| service_request : "fk"
    service_request_item }o--|| service_line : "fk"
    service_request_item }o--|| lib_item : "fk"
    service_request_item }o--|| service_recurrence : "fk"
    service_request_item }o--|| service_request : "fk"
    invoice_item }o--|| service_line : "fk"
    invoice_item }o--|| lib_item : "fk"
    invoice_item }o--|| job_item : "fk"
    invoice_item }o--|| invoice : "fk"
    invoice_item }o--|| invoice_recurrence : "fk"
    deficiency_report }o--|| service_line : "fk"
    deficiency_report }o--|| deficiency : "fk"
    deficiency_report }o--|| asset : "fk"
    deficiency_report }o--|| job : "fk"
